# Architecture Overview

> **For:** Deep technical context about system design decisions
> 
> **See also:**
> - `.cursorrules` - Complete patterns and examples for AI assistants
> - `component-checklist.md` - Quick reference checklist
> - `writing-usage-guidance.md` - JSDoc writing guide

## File Structure
```
src/
├── components/     # UI components (kebab-case folders/files)
├── provider/       # Tamagui config + UIProvider
└── index.ts        # Main exports

dev/
├── web/           # Web Storybook
├── native/        # React Native Storybook  
└── stories/       # Shared stories (kebab-case files)
```

## Platform Resolution

### How Files Are Resolved

**Web bundlers (Vite/Webpack):**
- Look for `component-name.tsx` first
- Use this as the default implementation

**React Native (Metro):**
- Look for `component-name.native.tsx` first
- Fall back to `component-name.tsx` if not found

### When to Split Platforms

**Split into `.native.tsx` when:**
- Using native-only APIs (MaskedView, Animated, Linking, etc.)
- Need different rendering (CSS vs native primitives)
- Performance optimizations specific to platform

**Examples:**
- `gradient-text.tsx` - Uses CSS `background-clip: text`
- `gradient-text.native.tsx` - Uses `MaskedView` component

**Keep unified when:**
- Component only uses Tamagui primitives
- Logic is platform-agnostic
- Same implementation works everywhere

## Component Patterns

See `.cursorrules` for complete component and story templates.

**Key principles:**
1. Extend Tamagui primitives (Stack, Text, etc.)
2. Export types with components
3. Write comprehensive JSDoc (see `writing-usage-guidance.md`)

## Adding New Components

See `component-checklist.md` for step-by-step checklist.

## Build System

### What Gets Built
- **Source files** (`components/`, `provider/`) - Shipped as TypeScript
- **Type declarations** (`dist/`) - Generated by `tsc` for IDE support

### Why Ship Source?
- Better tree-shaking by consumer's bundler
- No dual-instance issues with Tamagui
- Consumers' bundlers optimize based on their target
- Smaller package size (no pre-bundled code)

### Build Commands
```bash
yarn build  # Generate types once
yarn dev    # Watch mode for type generation
yarn clean  # Remove generated types
```

## Package Structure

**What's shipped in npm package:**
- Source files: `components/`, `provider/`, `index.ts`
- Type declarations: `dist/`
- No bundled JavaScript (consumers bundle from source)

**How consumers use it:**
- Web bundlers compile TypeScript source directly
- React Native Metro compiles TypeScript source directly
- Both use generated `.d.ts` for fast IDE autocomplete

## Naming Conventions

**Files/Folders:** kebab-case  
**Exports:** PascalCase  
**Variables:** camelCase

See `.cursorrules` for complete convention table.

